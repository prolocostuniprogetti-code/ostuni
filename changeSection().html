<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ostuni Interattiva</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                    },
                    colors: {
                        'ostuni-blue': '#1e40af', // Blu pi√π scuro e istituzionale
                        'ostuni-light-blue': '#3b82f6', // Blu brillante per l'accento
                        'ostuni-white': '#fefefe', // Bianco candido
                        'ostuni-grey': '#f3f4f6', // Grigio chiaro per sfondo/bordi
                        'ostuni-accent': '#FFD700', // Giallo/Oro per evidenziare numeri/dettagli
                    }
                }
            }
        }
    </script>
    <style>
        /* Stile di base e font */
        body {
            background-color: #f3f4f6;
            font-family: 'Inter', sans-serif;
            padding-top: 0;
            padding-bottom: 0;
            min-height: 100vh;
        }
        .icon {
            width: 20px;
            height: 20px;
        }
        
        /* 1. Header Accattivante (Simulazione Parallasse e Gradiente) */
        .header-bg {
            /* Immagine di Ostuni con leggero effetto parallasse */
            background-image: url('https://images.unsplash.com/photo-1594917409252-f1981e7d0e4f?q=80&w=2070&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D'); 
            background-size: cover;
            background-attachment: fixed; 
            background-position: center;
            height: 250px; 
            position: relative;
        }
        .header-overlay {
            /* Gradiente per un look pi√π moderno e leggibilit√† del testo */
            background: linear-gradient(180deg, rgba(30, 64, 175, 0.7) 0%, rgba(59, 130, 246, 0.5) 100%);
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: 1rem;
        }
        /* 2. Transizioni per il Cambio Sezione */
        .content-transition-active {
            transition: opacity 0.4s ease-in-out, transform 0.4s ease-in-out;
            opacity: 1;
            transform: translateY(0);
        }
        .content-transition-inactive {
            opacity: 0;
            transform: translateY(15px);
        }
        
        /* Stile per la responsivit√† dei pulsanti lista */
        @media (max-width: 640px) {
            .list-item-truncate {
                flex-grow: 1; 
                min-width: 0; 
            }
        }
    </style>
</head>
<body class="min-h-screen">

    <div id="app" class="max-w-4xl mx-auto bg-ostuni-white shadow-2xl rounded-xl overflow-hidden mt-4 mb-4">
        
        <header class="header-bg rounded-t-xl">
            <div class="header-overlay text-ostuni-white rounded-t-xl">
                <h1 class="text-5xl font-extrabold text-center tracking-tight drop-shadow-lg">OSTUNI: La Guida</h1>
                <p class="text-center mt-2 text-md font-light">Esplora la Citt√† Bianca con contenuti dinamici.</p>
                
            </div>
        </header>

        <nav id="nav-tabs" class="flex flex-wrap justify-center border-b border-ostuni-grey bg-white p-2">
            </nav>

        <main id="content-area" class="p-4 sm:p-6 bg-ostuni-white min-h-[400px]">
            <div id="loading-message" class="text-center p-10 text-gray-500">Caricamento delle attrazioni...</div>
            <div id="section-content" class="content-transition-inactive"></div>
        </main>
        
        <footer class="bg-gray-100 p-4 text-center text-xs text-gray-500 rounded-b-xl">
            Scegli una sezione e clicca sui punti d'interesse per aprire i dettagli! (App Responsive su GitHub)
        </footer>
    </div>

    <script>
        // --- 1. DATI DELLE ATTRAZIONI: MODIFICA QUI IMMAGINI E CONTENUTI ---
        const attrazioni = [
            {
                id: 'centro',
                nome: 'Centro Storico',
                icon: '<svg class="icon" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"></path></svg>',
                descrizione: 'Il labirinto bianco. Esplora i 28 punti storici del centro. Clicca su ogni attrazione per aprire la sua pagina di dettaglio.',
                elementi: [
                    { 
                        numero: 1, 
                        titolo: 'Obelisco di S. Oronzo', 
                        dettaglio: 'Monumento votivo in stile barocco, alto quasi 21 metri, eretto per ringraziare il santo per aver liberato la citt√† dalla peste.',
                        immagineUrl: 'https://upload.wikimedia.org/wikipedia/commons/thumb/e/e3/Colonna_di_Sant%27Oronzo_-_Ostuni.jpg/800px-Colonna_di_Sant%27Oronzo_-_Ostuni.jpg',
                        contenutoEsteso: 'L\'Obelisco, in realt√† una guglia in stile barocco, fu costruito nel 1771 dall\'architetto Giuseppe Greco per ringraziare Sant\'Oronzo, patrono di Ostuni, per aver risparmiato la citt√† da una pestilenza. √à un punto focale nella piazza della Libert√† e merita di essere ammirato da vicino per i suoi dettagli scultorei.' 
                    },
                    { numero: 2, titolo: 'Chiesa dello Spirito Santo', dettaglio: 'Una delle chiese pi√π antiche, caratterizzata da un bellissimo portale rinascimentale. Si trova vicino a Piazza della Libert√†.' },
                    { 
                        numero: 3, 
                        titolo: 'Palazzo Municipale', 
                        dettaglio: 'Antico convento francescano, oggi sede del Municipio. Si affaccia sulla Piazza della Libert√†, cuore della vita cittadina.',
                        // Puoi lasciare l'URL vuoto se non hai un'immagine
                        immagineUrl: '', 
                        contenutoEsteso: 'Il Palazzo Municipale sorge sull\'area del Convento dei Frati Minori Osservanti, soppresso nel 1809. La sua facciata neoclassica conserva elementi dell\'antica struttura conventuale e si integra perfettamente con l\'Obelisco nella piazza.'
                    },
                    { numero: 4, titolo: 'Chiesa San F. d\'Assisi', dettaglio: 'Esempio di architettura barocca, costruita sul sito di una preesistente chiesa medievale e ricca di decorazioni interne.' },
                    { numero: 5, titolo: 'Stemma degli Zevallos', dettaglio: 'Uno stemma nobiliare che decora uno dei palazzi storici pi√π importanti, testimonianza del passato aristocratico ostunese.' },
                    { numero: 6, titolo: 'Palazzo Ayroldi', dettaglio: 'Un imponente palazzo storico che si distingue per la sua elegante facciata e i dettagli architettonici barocchi.' },
                    { numero: 7, titolo: 'Palazzo Siccod√†', dettaglio: 'Esempio di residenza nobiliare nel cuore del centro storico, spesso visitabile in occasioni speciali.' },
                    { numero: 8, titolo: 'Capitello Corinzio', dettaglio: 'Antico elemento architettonico, probabilmente un resto di un tempio o struttura pi√π antica, incorporato nelle mura della citt√†.' },
                    { numero: 9, titolo: 'Convento delle Monacelle', dettaglio: 'Storico convento che oggi √® un importante edificio pubblico o residenziale, mantenendo l\'antica struttura monastica.' },
                    { numero: 10, titolo: 'Chiesa Monacelle/Museo', dettaglio: 'Chiesa annessa al convento (n. 9), spesso adibita a ospitare eventi o piccole esposizioni museali d\'arte sacra.' },
                    { numero: 11, titolo: 'Volta di Federico II', dettaglio: 'Un arco o passaggio storico che si dice sia legato alla presenza o alle opere dell\'Imperatore Federico II di Svevia.' },
                    { 
                        numero: 12, 
                        titolo: 'Cattedrale', 
                        dettaglio: 'Il simbolo di Ostuni. Famosa per il suo maestoso rosone gotico a 24 raggi sulla sommit√† del colle. Un capolavoro da non perdere.',
                        immagineUrl: 'https://images.unsplash.com/photo-1549488344-9d5450f3b4d4?q=80&w=1974&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D',
                        contenutoEsteso: 'La Concattedrale di Santa Maria Assunta, costruita nel XV secolo, √® il capolavoro del Gotico Fiorito pugliese. La sua caratteristica pi√π sorprendente √® il rosone centrale, il secondo pi√π grande d\'Europa per diametro, con i suoi 24 raggi che simboleggiano le ore del giorno e, secondo alcuni, i 24 apostoli. Sorge sul punto pi√π alto della citt√†, dominando tutto il panorama circostante.'
                    },
                    { numero: 13, titolo: 'La Loggia, Palazzo Vescovile', dettaglio: 'L\'elegante loggia con archi che collega la Cattedrale al Palazzo Vescovile, creando uno degli scorci pi√π fotografati.' },
                    { numero: 14, titolo: 'Portale palazzo Bizantizzi', dettaglio: 'Un pregevole portale d\'ingresso in stile barocco di una delle dimore storiche pi√π rappresentative del centro.' },
                    { numero: 15, titolo: 'Largo Pappad√†', dettaglio: 'Una piccola piazza o slargo caratteristico nel dedalo di vicoli, ideale per una pausa e ammirare il bianco delle case.' },
                    { numero: 16, titolo: 'Portale palazzo Ghionda', dettaglio: 'Magnifico portale di palazzo Ghionda, testimone dell\'architettura nobiliare ostunese del XVIII secolo.' },
                    { numero: 17, titolo: 'Portale palazzo Falgheri', dettaglio: 'Un altro esempio di raffinato portale storico, spesso decorato con stemmi di famiglia e mascheroni.' },
                    { numero: 18, titolo: 'Portale palazzo della Musica', dettaglio: 'L\'ingresso del palazzo che ospita la Scuola o l\'Associazione della Musica locale, riconoscibile dalle decorazioni a tema.' },
                    { numero: 19, titolo: 'Portale palazzo Palmieri', dettaglio: 'Uno dei palazzi pi√π noti e imponenti, con un portale d\'ingresso maestoso e ben conservato.' },
                    { numero: 20, titolo: 'Chiesa San G. in Compostela', dettaglio: 'Piccola chiesa dedicata a San Giacomo di Compostela, probabile punto di sosta o devozione per antichi pellegrini.' },
                    { numero: 21, titolo: 'Porta San Demetrio', dettaglio: 'Una delle antiche porte di accesso al centro storico fortificato, offre un punto panoramico sulla piana degli ulivi.' },
                    { numero: 22, titolo: 'Portale palazzo Jurleo', dettaglio: 'Un pregevole portale che merita una visita per i suoi dettagli scultorei e l\'uso della pietra locale.' },
                    { numero: 23, titolo: 'Portale palazzo Calamo', dettaglio: 'Suggestivo portale di un altro palazzo storico, incorniciato dal tipico intonaco bianco della citt√†.' },
                    { numero: 24, titolo: 'Portale palazzo Mileti', dettaglio: 'Esempio di architettura civile barocca ostunese, con balconi decorati in ferro battuto.' },
                    { numero: 25, titolo: 'Chiesa Santa M. della Stella', dettaglio: 'Chiesa dedicata alla Madonna della Stella, con un interno semplice ma suggestivo e un piccolo campanile.' },
                    { numero: 26, titolo: 'Porta Nova', dettaglio: 'Una delle porte pi√π recenti o ristrutturate. Da qui si accede al borgo antico con una prospettiva diversa.' },
                    { numero: 27, titolo: 'Chiesa San Pietro', dettaglio: 'Antica chiesa che contribuisce al panorama architettonico del centro, importante per la comunit√† locale.' },
                    { numero: 28, titolo: 'Chiesa Madonna del Carmine', dettaglio: 'Una chiesa importante, spesso punto di riferimento nel quartiere e luogo di celebrazioni religiose significative.' }
                ]
            },
            {
                id: 'mare',
                nome: 'Costa e Spiagge',
                icon: '<svg class="icon" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"></path></svg>',
                descrizione: 'La costa Bandiera Blu di Ostuni. Un litorale vario che offre sia spiagge sabbiose che calette rocciose. Clicca per i dettagli!',
                elementi: [
                    { numero: 1, titolo: 'Rosa Marina', dettaglio: 'Rinomata localit√† turistica con ampie spiagge libere e attrezzate, ideale per le famiglie e per chi cerca servizi.' },
                    { numero: 2, titolo: 'Torre Guaceto (Riserva Naturale)', dettaglio: 'Area marina protetta, un paradiso incontaminato. Ideale per snorkeling, birdwatching e lunghe passeggiate nella natura selvaggia. Accesso controllato.' }
                ]
            },
            {
                id: 'dintorni',
                nome: 'Dintorni e Natura',
                icon: '<svg class="icon" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path></svg>',
                descrizione: 'Esplora la Piana degli Ulivi Millenari e i siti archeologici appena fuori citt√†. Tutta l\'interazione √® a portata di click!',
                elementi: [
                    { numero: 1, titolo: 'Parco delle Dune Costiere', dettaglio: 'Un\'area protetta con percorsi naturalistici ideali per escursioni a piedi o in bicicletta, tra ulivi secolari, flora e fauna mediterranea.' },
                    { numero: 2, titolo: 'Masseria Brancati', dettaglio: 'Una masseria storica dove √® possibile ammirare un ulivo millenario (stimato oltre 3000 anni!) e degustare l\'olio d\'oliva locale.' }
                ]
            }
        ];

        // --- Variabili e Funzioni per l'Interazione ---
        const navTabs = document.getElementById('nav-tabs');
        const contentArea = document.getElementById('content-area');
        const loadingMessage = document.getElementById('loading-message');
        
        let currentSectionId = attrazioni[0].id; 

        /**
         * FUNZIONE: Visualizza la pagina di dettaglio di una singola attrazione
         * Il TEMPLATE MODULARE √® QUI DENTRO
         */
        function showDetail(sezioneId, numero, isInternalCall = false) {
            const sezione = attrazioni.find(a => a.id === sezioneId);
            const elemento = sezione ? sezione.elementi.find(el => el.numero === numero) : null;
            
            if (!elemento || !sezione) return;

            // 1. Aggiorna l'URL solo se la chiamata non proviene dal router
            if (!isInternalCall) {
                window.location.hash = `${sezioneId}/${numero}`;
                return; 
            }
            
            // Sceglie il contenuto pi√π lungo, se disponibile, altrimenti usa il dettaglio breve
            const contenutoPrincipale = elemento.contenutoEsteso || elemento.dettaglio;
            
            // INIZIO TEMPLATE MODIFICABILE PER LA PAGINA DI DETTAGLIO
            const html = `
                <button onclick="changeSection('${sezioneId}')" class="flex items-center text-ostuni-blue hover:text-ostuni-light-blue font-semibold mb-6 transition duration-200">
                    <svg class="w-5 h-5 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18"></path></svg>
                    Torna a ${sezione.nome}
                </button>

                ${elemento.immagineUrl ? `
                    <div class="relative h-64 sm:h-80 w-full overflow-hidden rounded-xl shadow-xl mb-6">
                        <img src="${elemento.immagineUrl}" alt="${elemento.titolo}" class="w-full h-full object-cover transition duration-500 ease-in-out hover:scale-105">
                        <div class="absolute inset-0 bg-black opacity-10"></div>
                    </div>
                ` : ''}

                <div class="p-6 bg-ostuni-grey rounded-xl shadow-lg">
                    <div class="flex items-baseline mb-3">
                        <span class="text-ostuni-accent text-3xl font-extrabold mr-3">${elemento.numero}</span>
                        <h2 class="inline-block text-3xl font-bold text-gray-800 border-b-4 border-ostuni-accent pb-1">${elemento.titolo}</h2>
                    </div>
                    
                    <p class="mt-4 text-lg text-gray-700 leading-relaxed whitespace-pre-wrap">${contenutoPrincipale}</p>
                </div>
                
                <div class="mt-6 p-4 bg-ostuni-white rounded-xl shadow-md border border-gray-200">
                    <h3 class="text-xl font-semibold text-ostuni-blue mb-3">Informazioni Utili</h3>
                    
                    <ul class="space-y-2 text-gray-700">
                        <li>üï∞Ô∏è Orari: 9:00 - 18:00 (Verificare in loco)</li>
                        <li>üéüÔ∏è Costo Ingresso: Gratuito / (A pagamento: 3‚Ç¨)</li>
                        <li>üó∫Ô∏è <a href="#" class="text-ostuni-light-blue hover:underline">Vedi sulla Mappa (Link Esterno)</a></li>
                        </ul>
                </div>

                <div class="mt-8 text-sm text-gray-500 border-t pt-4">
                    Sei nella sezione Dettaglio > ${sezione.nome} > ${elemento.titolo}
                </div>
            `;
            // FINE TEMPLATE MODIFICABILE

            // 3. Applica l'animazione e sostituisci il contenuto
            contentArea.classList.add('content-transition-inactive');
            contentArea.classList.remove('content-transition-active');
            
            setTimeout(() => {
                contentArea.innerHTML = html;
                document.getElementById('app').scrollTo({ top: 0, behavior: 'smooth' }); // Scrolla in cima
                contentArea.classList.remove('content-transition-inactive');
                contentArea.classList.add('content-transition-active');
            }, 400); 

            // 4. Aggiorna la tab attiva
            updateActiveTab(sezioneId);
        }

        /**
         * Genera la lista delle attrazioni della sezione (Non modificato)
         */
        function generateContentHTML(sezione) {
            let html = `<h2 class="text-3xl font-bold mb-4 text-ostuni-blue">${sezione.nome}</h2>`;
            html += `<p class="mb-6 text-gray-700 italic">${sezione.descrizione}</p>`;
            
            sezione.elementi.forEach(el => {
                html += `
                    <button onclick="showDetail('${sezione.id}', ${el.numero})" class="w-full text-left p-4 mb-3 flex items-center bg-white border border-gray-200 rounded-lg shadow hover:shadow-lg hover:border-ostuni-light-blue transition duration-300">
                        <span class="text-ostuni-accent text-xl font-extrabold mr-4 flex-shrink-0">${el.numero}.</span>
                        <div class="list-item-truncate overflow-hidden">
                            <span class="font-semibold text-lg text-gray-800 block">${el.titolo}</span>
                            <p class="text-sm text-gray-500 truncate">${el.dettaglio.substring(0, 70)}...</p>
                        </div>
                        <svg class="w-5 h-5 ml-auto text-ostuni-light-blue flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path></svg>
                    </button>
                `;
            });
            return html;
        }

        /**
         * Aggiorna lo stile della tab attiva (Non modificato)
         */
        function updateActiveTab(id) {
            document.querySelectorAll('#nav-tabs button').forEach(btn => {
                btn.classList.remove('bg-ostuni-light-blue', 'text-ostuni-white', 'shadow-md');
                btn.classList.add('hover:bg-gray-200', 'text-gray-700');
            });
            const newActiveTab = document.querySelector(`#tab-${id}`);
            if (newActiveTab) {
                newActiveTab.classList.remove('hover:bg-gray-200', 'text-gray-700');
                newActiveTab.classList.add('bg-ostuni-light-blue', 'text-ostuni-white', 'shadow-md');
            }
        }

        /**
         * Gestisce la logica di cambio sezione (Non modificato)
         */
        function changeSection(id, isInternalCall = false) {
            currentSectionId = id; 
            const sezione = attrazioni.find(a => a.id === id);
            if (!sezione) return;

            // 1. Aggiorna l'URL solo se la chiamata non proviene dal router
            if (!isInternalCall) {
                window.location.hash = id;
                return; 
            }

            // 2. Aggiorna lo stile della tab
            updateActiveTab(id);

            // 3. Animazione e cambio contenuto 
            contentArea.classList.add('content-transition-inactive');
            contentArea.classList.remove('content-transition-active');
            
            setTimeout(() => {
                contentArea.innerHTML = generateContentHTML(sezione);
                document.getElementById('app').scrollTo({ top: 0, behavior: 'smooth' }); 
                contentArea.classList.remove('content-transition-inactive');
                contentArea.classList.add('content-transition-active');
            }, 400); 
        }

        /**
         * Logica del router basata sull'hash dell'URL (Non modificato)
         */
        function handleRouting() {
            const hash = window.location.hash.slice(1); 
            
            if (!hash) {
                changeSection(attrazioni[0].id, true);
                return;
            }

            const parts = hash.split('/');
            const sectionId = parts[0];
            const detailNumber = parts.length > 1 ? parseInt(parts[1]) : null;

            if (detailNumber && !isNaN(detailNumber)) {
                showDetail(sectionId, detailNumber, true);
            } else if (sectionId) {
                changeSection(sectionId, true);
            } else {
                changeSection(attrazioni[0].id, true);
            }
        }

        /**
         * Inizializza l'applicazione (Non modificato)
         */
        function initApp() {
            if (!navTabs || !contentArea) {
                console.error("Elementi HTML essenziali non trovati. Controllare l'ID.");
                return;
            }
            loadingMessage.style.display = 'none';

            // 1. Genera i bottoni delle tab
            attrazioni.forEach(attrazione => {
                const button = document.createElement('button');
                button.id = `tab-${attrazione.id}`;
                button.className = 'flex items-center space-x-2 py-2 px-4 mx-1 my-1 rounded-full text-sm font-medium transition duration-150 ease-in-out text-gray-700 hover:bg-gray-200';
                button.onclick = () => window.location.hash = attrazione.id; 
                button.innerHTML = attrazione.icon + `<span>${attrazione.nome}</span>`;
                navTabs.appendChild(button);
            });

            // 2. Associa il router al cambio hash
            window.onhashchange = handleRouting;

            // 3. Carica la sezione iniziale in base all'hash o al default
            handleRouting();
        }

        // Avvia l'applicazione quando il DOM √® pronto
        window.onload = initApp;

    </script>
</body>
</html>
